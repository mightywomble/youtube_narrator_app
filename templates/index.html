{% extends "base.html" %}

{% block title %}AI Video Narrator - Create Scripts & Narrate{% endblock %}

{% block content %}

<section id="uploadSection">
    <h2>1. Upload Your Video</h2>
    <form id="uploadForm" enctype="multipart/form-data">
        <label for="videoFile">Select a video file:</label>
        <input type="file" id="videoFile" name="video" accept="video/*" required>
        <button type="submit" id="uploadVideoBtn">Upload Video & Analyze</button>
        <div id="uploadMessage" class="message"></div>
        <p>
            <em>Note: Video analysis can take a few minutes depending on video length.</em>
        </p>

        <!-- Progress bar for file upload -->
        <div id="uploadProgressBarContainer" class="progress-container hidden">
            <div id="uploadProgressBar" class="progress-bar">0%</div>
            <div id="uploadProgressText" class="progress-text">File Upload: 0%</div>
        </div>

        <!-- Progress bar for video analysis -->
        <div id="analysisProgressBarContainer" class="progress-container hidden">
            <div id="analysisProgressBar" class="progress-bar">0%</div>
            <div id="analysisProgressText" class="progress-text">Analysis: Initializing...</div>
        </div>

    </form>
</section>

<!-- Main display area: Video on left, Script on right (equal halves) -->
<div class="main-display-area">
    <section id="videoPlaybackSection" class="hidden display-box display-half">
        <h2>Original Video Preview</h2>
        <video id="videoPlayer" controls></video>
    </section>

    <!-- Script Section (now side-by-side with video) -->
    <section id="scriptSection" class="hidden display-box display-half">
        <h2>2. Generated Script</h2>
        <label for="scriptText">Review and edit the generated script:</label>
        <textarea id="scriptText" rows="10" placeholder="Script will appear here after video analysis..."></textarea>
        <div id="speechMessage" class="message"></div>
        <audio id="audioPlayer" controls class="hidden"></audio>

        <!-- Button for Convert Script to Speech, centered below text area -->
        <div class="button-center-wrapper">
            <button id="generateSpeechBtn" disabled>Convert Script to Speech</button>
        </div>
    </section>

    <!-- The button panel section is no longer needed in this layout -->
    <!-- <section id="buttonPanelSection" class="hidden display-box button-panel-box">
        <div class="button-panel-content">
            <button id="generateSpeechBtn" disabled>Convert Script to Speech</button>
        </div>
    </section> -->
</div>

<!-- The merge/check/youtube sections remain below the main display area -->
<section id="mergeSection" class="hidden">
    <h2>3. Merge Video & Audio</h2>
    <button id="mergeBtn" disabled>Merge Video and Speech</button>
    <div id="statusMessage" class="message"></div>
    <div id="mergeProgressBarContainer" class="progress-container hidden">
        <div id="mergeProgressBar" class="progress-bar">0%</div>
        <div id="mergeProgressText" class="progress-text"></div>
    </div>
</section>

<section id="mergedVideoPlaybackSection" class="hidden merged-video-section">
    <h2>4. Check Merged Video</h2>
    <video id="mergedVideoPlayer" controls></video>
    <div class="button-group">
        <button id="checkMergedVideoBtn" disabled>Play Merged Video</button>
    </div>
</section>

<section id="youtubeUploadDetailsSection" class="hidden youtube-upload-section">
    <h2>5. Upload to YouTube</h2>
    <label for="youtubeTitle">Video Title:</label>
    <input type="text" id="youtubeTitle" placeholder="Enter video title..." required>

    <label for="youtubeDescription">Video Description:</label>
    <textarea id="youtubeDescription" rows="5" placeholder="Enter video description..."></textarea>

    <button id="youtubeUploadBtn" disabled>Upload to YouTube</button>
    <div id="youtubeProgressBarContainer" class="progress-container hidden">
        <div id="youtubeProgressBar" class="progress-bar">0%</div>
        <div id="youtubeProgressText" class="progress-text"></div>
    </div>
    <p>
        <em>Note: For a real YouTube upload, you will need to configure YouTube API credentials in the settings.</em>
    </p>
</section>
{% endblock %}
